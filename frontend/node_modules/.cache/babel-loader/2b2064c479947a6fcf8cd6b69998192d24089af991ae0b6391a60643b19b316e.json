{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sejal\\\\OneDrive\\\\Desktop\\\\ride\\\\frontend\\\\src\\\\components\\\\FreeMap.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ChangeView({\n  center\n}) {\n  _s();\n  const map = useMap();\n  map.setView(center, 13);\n  return null;\n}\n\n// marker fix\n_s(ChangeView, \"cX187cvZ2hODbkaiLn05gMk1sCM=\", false, function () {\n  return [useMap];\n});\n_c = ChangeView;\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\nconst greenIcon = new L.Icon({\n  iconUrl: \"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\nconst redIcon = new L.Icon({\n  iconUrl: \"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n  const R = 6371;\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\nfunction LocationMarker({\n  pickup,\n  setPickup,\n  drop,\n  setDrop,\n  setFare\n}) {\n  _s2();\n  useMapEvents({\n    click(e) {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n      if (!pickup) {\n        setPickup({\n          lat,\n          lng\n        });\n      } else if (!drop) {\n        setDrop({\n          lat,\n          lng\n        });\n        const distance = calculateDistance(pickup.lat, pickup.lng, lat, lng);\n        setFare(Math.round(distance * 10));\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [pickup && /*#__PURE__*/_jsxDEV(Marker, {\n      position: pickup,\n      icon: greenIcon,\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: \"Pickup\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), drop && /*#__PURE__*/_jsxDEV(Marker, {\n      position: drop,\n      icon: redIcon,\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: \"Drop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s2(LocationMarker, \"Ld/tk8Iz8AdZhC1l7acENaOEoCo=\", false, function () {\n  return [useMapEvents];\n});\n_c2 = LocationMarker;\nfunction FreeMap({\n  setFare,\n  pickupLocation,\n  dropLocation\n}) {\n  _s3();\n  const [pickup, setPickup] = useState(null);\n  const [drop, setDrop] = useState(null);\n  const defaultCenter = [28.6139, 77.2090];\n  useEffect(() => {\n    if (pickupLocation && dropLocation) {\n      setPickup(pickupLocation);\n      setDrop(dropLocation);\n      const distance = calculateDistance(pickupLocation.lat, pickupLocation.lng, dropLocation.lat, dropLocation.lng);\n      setFare(Math.round(distance * 10));\n    }\n  }, [pickupLocation, dropLocation]);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: pickup ? [pickup.lat, pickup.lng] : defaultCenter,\n    zoom: 12,\n    style: {\n      height: \"500px\",\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), pickup && /*#__PURE__*/_jsxDEV(ChangeView, {\n      center: [pickup.lat, pickup.lng]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(LocationMarker, {\n      pickup: pickup,\n      setPickup: setPickup,\n      drop: drop,\n      setDrop: setDrop,\n      setFare: setFare\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n}\n_s3(FreeMap, \"YMwXVm3BgUH8LWjLp+DMWkTrsRM=\");\n_c3 = FreeMap;\nexport default FreeMap;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ChangeView\");\n$RefreshReg$(_c2, \"LocationMarker\");\n$RefreshReg$(_c3, \"FreeMap\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Popup","useMapEvents","useMap","L","jsxDEV","_jsxDEV","Fragment","_Fragment","ChangeView","center","_s","map","setView","_c","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","greenIcon","redIcon","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","a","sin","cos","c","atan2","sqrt","LocationMarker","pickup","setPickup","drop","setDrop","setFare","_s2","click","e","lat","lng","latlng","distance","round","children","position","icon","fileName","_jsxFileName","lineNumber","columnNumber","_c2","FreeMap","pickupLocation","dropLocation","_s3","defaultCenter","zoom","style","height","width","url","_c3","$RefreshReg$"],"sources":["C:/Users/sejal/OneDrive/Desktop/ride/frontend/src/components/FreeMap.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nfunction ChangeView({ center }) {\r\n  const map = useMap();\r\n  map.setView(center, 13);\r\n  return null;\r\n}\r\n\r\n// marker fix\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\n\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\r\n  iconUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\r\n  shadowUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\r\n});\r\n\r\nconst greenIcon = new L.Icon({\r\n  iconUrl:\r\n    \"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png\",\r\n  shadowUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\r\n});\r\n\r\nconst redIcon = new L.Icon({\r\n  iconUrl:\r\n    \"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png\",\r\n  shadowUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\r\n});\r\n\r\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\r\n\r\n  const R = 6371;\r\n\r\n  const dLat = (lat2 - lat1) * Math.PI / 180;\r\n\r\n  const dLon = (lon2 - lon1) * Math.PI / 180;\r\n\r\n  const a =\r\n    Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n    Math.cos(lat1 * Math.PI/180) *\r\n    Math.cos(lat2 * Math.PI/180) *\r\n    Math.sin(dLon/2) *\r\n    Math.sin(dLon/2);\r\n\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n\r\n  return R * c;\r\n}\r\n\r\nfunction LocationMarker({ pickup, setPickup, drop, setDrop, setFare }) {\r\n\r\n  useMapEvents({\r\n\r\n    click(e) {\r\n\r\n      const { lat, lng } = e.latlng;\r\n\r\n      if (!pickup) {\r\n\r\n        setPickup({ lat, lng });\r\n\r\n      }\r\n\r\n      else if (!drop) {\r\n\r\n        setDrop({ lat, lng });\r\n\r\n        const distance = calculateDistance(\r\n          pickup.lat,\r\n          pickup.lng,\r\n          lat,\r\n          lng\r\n        );\r\n\r\n        setFare(Math.round(distance * 10));\r\n\r\n      }\r\n\r\n    },\r\n\r\n  });\r\n\r\n  return (\r\n\r\n    <>\r\n\r\n      {pickup &&\r\n        <Marker position={pickup} icon={greenIcon}>\r\n          <Popup>Pickup</Popup>\r\n        </Marker>\r\n      }\r\n\r\n      {drop &&\r\n        <Marker position={drop} icon={redIcon}>\r\n          <Popup>Drop</Popup>\r\n        </Marker>\r\n      }\r\n\r\n    </>\r\n\r\n  );\r\n\r\n}\r\n\r\nfunction FreeMap({ setFare, pickupLocation, dropLocation }) {\r\n\r\n  const [pickup, setPickup] = useState(null);\r\n\r\n  const [drop, setDrop] = useState(null);\r\n\r\n  const defaultCenter = [28.6139, 77.2090];\r\n\r\n  useEffect(() => {\r\n\r\n    if (pickupLocation && dropLocation) {\r\n\r\n      setPickup(pickupLocation);\r\n\r\n      setDrop(dropLocation);\r\n\r\n      const distance = calculateDistance(\r\n        pickupLocation.lat,\r\n        pickupLocation.lng,\r\n        dropLocation.lat,\r\n        dropLocation.lng\r\n      );\r\n\r\n      setFare(Math.round(distance * 10));\r\n\r\n    }\r\n\r\n  }, [pickupLocation, dropLocation]);\r\n\r\n  return (\r\n\r\n    <MapContainer\r\n      center={pickup ? [pickup.lat, pickup.lng] : defaultCenter}\r\n      zoom={12}\r\n      style={{ height: \"500px\", width: \"100%\" }}\r\n    >\r\n\r\n      <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n\r\n      {pickup &&\r\n        <ChangeView center={[pickup.lat, pickup.lng]} />\r\n      }\r\n\r\n      <LocationMarker\r\n        pickup={pickup}\r\n        setPickup={setPickup}\r\n        drop={drop}\r\n        setDrop={setDrop}\r\n        setFare={setFare}\r\n      />\r\n\r\n    </MapContainer>\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default FreeMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}