{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sejal\\\\OneDrive\\\\Desktop\\\\ride\\\\frontend\\\\src\\\\components\\\\Map.jsx\",\n  _s = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { MapContainer, TileLayer, Marker, useMapEvents, useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-routing-machine\";\n\n// marker fix\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png\",\n  iconUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png\",\n  shadowUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png\"\n});\nfunction Routing({\n  pickup,\n  drop,\n  setDistance,\n  setFare\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (!pickup || !drop) return;\n    const control = L.Routing.control({\n      waypoints: [L.latLng(pickup[0], pickup[1]), L.latLng(drop[0], drop[1])],\n      routeWhileDragging: false,\n      addWaypoints: false,\n      draggableWaypoints: false,\n      createMarker: () => null\n    }).addTo(map);\n    control.on(\"routesfound\", function (e) {\n      const route = e.routes[0];\n      const distanceKm = route.summary.totalDistance / 1000;\n      const fare = distanceKm * 10;\n      console.log(\"Distance:\", distanceKm);\n      console.log(\"Fare:\", fare);\n      setDistance(distanceKm.toFixed(2));\n      setFare(fare.toFixed(0));\n    });\n    return () => {\n      map.removeControl(control);\n    };\n  }, [pickup, drop, map, setDistance, setFare]);\n  return null;\n}\n_s(Routing, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = Routing;\nfunction Map() {\n  _s3();\n  var _s2 = $RefreshSig$();\n  const [pickup, setPickup] = useState(null);\n  const [drop, setDrop] = useState(null);\n  const [distance, setDistance] = useState(0);\n  const [fare, setFare] = useState(0);\n  function ClickHandler() {\n    _s2();\n    useMapEvents({\n      click(e) {\n        if (!pickup) setPickup([e.latlng.lat, e.latlng.lng]);else if (!drop) setDrop([e.latlng.lat, e.latlng.lng]);\n      }\n    });\n    return null;\n  }\n  _s2(ClickHandler, \"Ld/tk8Iz8AdZhC1l7acENaOEoCo=\", false, function () {\n    return [useMapEvents];\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [28.6139, 77.2090],\n      zoom: 13,\n      style: {\n        height: \"500px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ClickHandler, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), pickup && /*#__PURE__*/_jsxDEV(Marker, {\n        position: pickup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 20\n      }, this), drop && /*#__PURE__*/_jsxDEV(Marker, {\n        position: drop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(Routing, {\n        pickup: pickup,\n        drop: drop,\n        setDistance: setDistance,\n        setFare: setFare\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), distance > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"10px\",\n        background: \"black\",\n        color: \"white\"\n      },\n      children: [\"Distance: \", distance, \" km\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this), \"Fare: \\u20B9\", fare]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n}\n_s3(Map, \"kFN4So8MvsIFPXvwiGWytOuW46s=\");\n_c2 = Map;\nexport default Map;\nvar _c, _c2;\n$RefreshReg$(_c, \"Routing\");\n$RefreshReg$(_c2, \"Map\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","useMapEvents","useMap","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Routing","pickup","drop","setDistance","setFare","_s","map","control","waypoints","latLng","routeWhileDragging","addWaypoints","draggableWaypoints","createMarker","addTo","on","e","route","routes","distanceKm","summary","totalDistance","fare","console","log","toFixed","removeControl","_c","Map","_s3","_s2","$RefreshSig$","setPickup","setDrop","distance","ClickHandler","click","latlng","lat","lng","children","center","zoom","style","height","url","fileName","_jsxFileName","lineNumber","columnNumber","position","padding","background","color","_c2","$RefreshReg$"],"sources":["C:/Users/sejal/OneDrive/Desktop/ride/frontend/src/components/Map.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  MapContainer,\r\n  TileLayer,\r\n  Marker,\r\n  useMapEvents,\r\n  useMap\r\n} from \"react-leaflet\";\r\n\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"leaflet-routing-machine\";\r\n\r\n\r\n// marker fix\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\n\r\nL.Icon.Default.mergeOptions({\r\n\r\n  iconRetinaUrl:\r\n    \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png\",\r\n\r\n  iconUrl:\r\n    \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png\",\r\n\r\n  shadowUrl:\r\n    \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png\",\r\n\r\n});\r\n\r\n\r\nfunction Routing({ pickup, drop, setDistance, setFare }) {\r\n\r\n  const map = useMap();\r\n\r\n  useEffect(() => {\r\n\r\n    if (!pickup || !drop) return;\r\n\r\n    const control = L.Routing.control({\r\n\r\n      waypoints: [\r\n\r\n        L.latLng(pickup[0], pickup[1]),\r\n        L.latLng(drop[0], drop[1])\r\n\r\n      ],\r\n\r\n      routeWhileDragging: false,\r\n\r\n      addWaypoints: false,\r\n\r\n      draggableWaypoints: false,\r\n\r\n      createMarker: () => null\r\n\r\n    }).addTo(map);\r\n\r\n\r\n\r\n    control.on(\"routesfound\", function (e) {\r\n\r\n      const route = e.routes[0];\r\n\r\n      const distanceKm = route.summary.totalDistance / 1000;\r\n\r\n      const fare = distanceKm * 10;\r\n\r\n      console.log(\"Distance:\", distanceKm);\r\n\r\n      console.log(\"Fare:\", fare);\r\n\r\n      setDistance(distanceKm.toFixed(2));\r\n\r\n      setFare(fare.toFixed(0));\r\n\r\n    });\r\n\r\n\r\n\r\n    return () => {\r\n\r\n      map.removeControl(control);\r\n\r\n    };\r\n\r\n  }, [pickup, drop, map, setDistance, setFare]);\r\n\r\n\r\n\r\n  return null;\r\n\r\n}\r\n\r\n\r\n\r\nfunction Map() {\r\n\r\n  const [pickup, setPickup] = useState(null);\r\n\r\n  const [drop, setDrop] = useState(null);\r\n\r\n  const [distance, setDistance] = useState(0);\r\n\r\n  const [fare, setFare] = useState(0);\r\n\r\n\r\n\r\n  function ClickHandler() {\r\n\r\n    useMapEvents({\r\n\r\n      click(e) {\r\n\r\n        if (!pickup)\r\n\r\n          setPickup([e.latlng.lat, e.latlng.lng]);\r\n\r\n        else if (!drop)\r\n\r\n          setDrop([e.latlng.lat, e.latlng.lng]);\r\n\r\n      }\r\n\r\n    });\r\n\r\n    return null;\r\n  }\r\n\r\n\r\n\r\n  return (\r\n\r\n    <div>\r\n\r\n      <MapContainer\r\n        center={[28.6139, 77.2090]}\r\n        zoom={13}\r\n        style={{ height: \"500px\" }}\r\n      >\r\n\r\n        <TileLayer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n\r\n        <ClickHandler />\r\n\r\n        {pickup && <Marker position={pickup} />}\r\n\r\n        {drop && <Marker position={drop} />}\r\n\r\n        <Routing\r\n          pickup={pickup}\r\n          drop={drop}\r\n          setDistance={setDistance}\r\n          setFare={setFare}\r\n        />\r\n\r\n      </MapContainer>\r\n\r\n\r\n\r\n      {/* SHOW DISTANCE AND FARE */}\r\n\r\n      {distance > 0 && (\r\n\r\n        <div style={{\r\n\r\n          padding: \"10px\",\r\n          background: \"black\",\r\n          color: \"white\"\r\n\r\n        }}>\r\n\r\n          Distance: {distance} km\r\n\r\n          <br />\r\n\r\n          Fare: â‚¹{fare}\r\n\r\n        </div>\r\n\r\n      )}\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default Map;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}